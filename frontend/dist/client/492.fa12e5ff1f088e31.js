"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[492],{8492:(Ie,m,l)=>{l.r(m),l.d(m,{SearchModule:()=>qe});var d=l(6814),_=l(1730),u=l(553),e=l(9468),g=l(9862);let v=(()=>{class i{constructor(t){this._http=t,this.baseUrl=u.N.baseUrl}searchRides(t,r,n){return this._http.post(`${this.baseUrl}/ride/getSearchedRide`,{origin:t.name,destination:r.name,date:n})}request(t,r,n){return this._http.patch(`${this.baseUrl}/ride/requestRide`,{rideId:t,userId:r,requestId:n})}saveReview(t,r,n){return this._http.post(`${this.baseUrl}/review/saveComment`,{rideId:t,userId:r,review:n})}saveReply(t,r,n){return this._http.patch(`${this.baseUrl}/review/saveReply`,{reviewId:t,userId:r,reply:n})}requestRide(t,r){return this._http.patch(`${this.baseUrl}/ride/requestRide`,{rideId:t,userId:r})}cancelRideRequest(t,r,n,s){const a={rideId:t,userId:r,requestId:n,action:s};return console.log(a),this._http.patch(`${this.baseUrl}/ride/cancelRideRequest`,a)}saveReviewLike(t,r){return this._http.patch(`${this.baseUrl}/review/reviewLike`,{reviewId:r,userId:t})}saveReplyLike(t,r){return this._http.patch(`${this.baseUrl}/review/replyLike`,{replyId:r,userId:t})}deleteReview(t){return this._http.delete(`${this.baseUrl}/review/deleteReview?id=${t}`)}deleteReply(t){return this._http.delete(`${this.baseUrl}/review/deleteReply?id=${t}`)}rideLikes(t,r){return this._http.patch(`${this.baseUrl}/ride/rideLike`,{rideId:t,userId:r})}static#e=this.\u0275fac=function(r){return new(r||i)(e.LFG(g.eN))};static#t=this.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var f=l(3507),w=l(2425),c=l(95);function b(i,o){if(1&i&&e._UZ(0,"img",28),2&i){const t=e.oxw().$implicit,r=e.oxw(2);e.Q6J("src",r.picUrl+t.vehicleDetails.userDetails.profileImage[t.vehicleDetails.userDetails.profileImage.length-1],e.LSH)}}function Z(i,o){1&i&&e._UZ(0,"img",29)}function y(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"article",11)(1,"div",12)(2,"a",13)(3,"div",14)(4,"div"),e.YNc(5,b,1,1,"img",15),e.YNc(6,Z,1,0,"img",16),e.qZA(),e.TgZ(7,"div",17)(8,"p",18),e.NdJ("click",function(){const s=e.CHM(t).$implicit,a=e.oxw(2);return e.KtG(a.navigator(s.vehicleDetails.userDetails._id))}),e._uU(9),e.TgZ(10,"span",19),e._uU(11),e.qZA()()()()()(),e.TgZ(12,"div",20)(13,"div",21),e._UZ(14,"img",22),e.qZA(),e.TgZ(15,"div",23)(16,"h5",24),e._uU(17," VEHICLE DETAILS:- "),e.qZA(),e.TgZ(18,"h6"),e._uU(19),e.qZA(),e.TgZ(20,"h6"),e._uU(21),e.qZA()(),e.TgZ(22,"div",23)(23,"h5",24),e._uU(24," RIDE DETAILS:- "),e.qZA(),e.TgZ(25,"h6"),e._uU(26),e.ALo(27,"uppercase"),e.ALo(28,"uppercase"),e.qZA(),e.TgZ(29,"h6"),e._uU(30),e.qZA()(),e.TgZ(31,"div",25)(32,"button",26),e.NdJ("click",function(){const s=e.CHM(t).$implicit,a=e.oxw(2);return e.KtG(a.view(s._id))}),e._uU(33," view "),e.qZA()()(),e._UZ(34,"hr",27),e.qZA()}if(2&i){const t=o.$implicit,r=e.oxw(2);e.xp6(5),e.Q6J("ngIf",t.vehicleDetails.userDetails.profileImage),e.xp6(1),e.Q6J("ngIf",!t.vehicleDetails.userDetails.profileImage),e.xp6(3),e.hij(" ",t.vehicleDetails.userDetails.name," "),e.xp6(2),e.hij(" ",t.vehicleDetails.userDetails.email," "),e.xp6(3),e.Q6J("src",r.picUrl+t.vehicleDetails.VehiclePhotos[t.vehicleDetails.VehiclePhotos.length-1],e.LSH),e.xp6(5),e.Oqu(t.vehicleDetails.brand),e.xp6(2),e.Oqu(t.vehicleDetails.model),e.xp6(5),e.AsE("",e.lcZ(27,10,t.origin)," to ",e.lcZ(28,12,t.destination),""),e.xp6(4),e.hij("Date: ",t.departure_date.split("T")[0],"")}}function C(i,o){if(1&i&&(e.TgZ(0,"ul",32)(1,"li")(2,"a",33),e._uU(3),e.qZA()()()),2&i){const t=o.index;e.xp6(3),e.hij(" ",t+1," ")}}function T(i,o){if(1&i&&(e.TgZ(0,"nav",30),e.YNc(1,C,4,1,"ul",31),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",t.searchData)}}function S(i,o){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,y,35,14,"article",9),e.YNc(2,T,2,1,"nav",10),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.searchData),e.xp6(1),e.Q6J("ngIf",t.searchData.length>0)}}function q(i,o){1&i&&(e.TgZ(0,"div")(1,"article",11)(2,"div",34)(3,"div")(4,"h1"),e._uU(5,"No rides found!!!"),e.qZA()()()()())}let I=(()=>{class i{constructor(t,r,n,s,a){this._searchService=t,this._jwtService=r,this.ngZone=n,this._toastr=s,this._router=a,this.picUrl=u.N.picUrl,this.userId="",this.fromValue={address:""},this.toValue={address:""},this.origin="Origin",this.destination="Destination"}ngOnInit(){this.initializeFromAutocomplete(),this.initializeToAutocomplete();const t=localStorage.getItem("state");this.userId=JSON.parse(t)._id,console.log("search",this.userId,JSON.parse(t))}initializeFromAutocomplete(){this.ngZone.runOutsideAngular(()=>{this.fromAutocomplete=new google.maps.places.Autocomplete(document.getElementById("fromInput"),{types:["address"]}),this.fromAutocomplete.addListener("place_changed",()=>{const t=this.fromAutocomplete.getPlace();this.fromValue=t,this.origin=t?.name})})}initializeToAutocomplete(){this.ngZone.runOutsideAngular(()=>{this.toAutocomplete=new google.maps.places.Autocomplete(document.getElementById("toInput"),{types:["address"]}),this.toAutocomplete.addListener("place_changed",()=>{const t=this.toAutocomplete.getPlace();this.toValue=t,this.destination=t?.name})})}search(){const s=this.fromValue.formatted_address.split(", ")[2];console.log("photos",s),this._searchSubscription=this._searchService.searchRides(this.fromValue,this.toValue,this.date).subscribe(a=>{console.log(a.data),"Success"===a.status&&(this.searchData=a.data)})}navigator(t){console.log(t),this._router.navigate(["/user/profile"],{queryParams:{id:t}})}requestRide(t,r){console.log(t,">>",r),this._requestSubscription=this._searchService.requestRide(t,r).subscribe(n=>{})}view(t){this._router.navigate(["/user/search/view"],{queryParams:{id:t}})}ngOnDestroy(){this._searchSubscription&&this._searchSubscription.unsubscribe(),this._requestSubscription&&this._requestSubscription.unsubscribe()}static#e=this.\u0275fac=function(r){return new(r||i)(e.Y36(v),e.Y36(f.T),e.Y36(e.R0b),e.Y36(w._W),e.Y36(_.F0))};static#t=this.\u0275cmp=e.Xpm({type:i,selectors:[["app-search"]],decls:14,vars:7,consts:[[1,"block","w-full","bg-white"],[1,"p-6","rounded-3xl","shadow-xl"],[1,"flex","flex-col","md:flex-row","justify-around",3,"submit"],["data-te-input-wrapper-init","",1,"relative","mb-3","m-1","w-full","md:w-1/4"],["type","text","id","fromInput","name","origin","required","",1,"block","min-h-[auto]","w-full","rounded-3xl","border-0","bg-blue-50","px-3","py-[0.32rem]","shadow-2xl","placeholder:text-slate-600",3,"ngModel","placeholder","ngModelChange"],["type","text","id","toInput","name","destination","required","",1,"block","min-h-[auto]","w-full","rounded-3xl","border-0","bg-blue-50","px-3","py-[0.32rem]","placeholder:text-slate-600",3,"ngModel","placeholder","ngModelChange"],["type","date","name","date","id","exampleFormControlInputText",1,"block","min-h-[auto]","w-full","rounded-3xl","border-0","bg-blue-50","px-3","py-[0.32rem]","placeholder:text-slate-600",3,"ngModel","ngModelChange"],["type","submit",1,"bg-blue-600","hover:bg-gray-700","rounded-3xl","pl-3","pr-3","pt-2","pb-2","text-white"],[4,"ngIf"],["class","bg-white hover:bg-gray-100 mt-3 transition duration-350 ease-in-out",4,"ngFor","ngForOf"],["class","mt-4",4,"ngIf"],[1,"bg-white","hover:bg-gray-100","mt-3","transition","duration-350","ease-in-out"],[1,"flex","flex-shrink-0","p-4","pb-0"],["href","#",1,"flex-shrink-0","group","block"],[1,"flex","items-center"],["class","inline-block h-10 w-10 rounded-full","alt","",3,"src",4,"ngIf"],["class","inline-block h-10 w-10 rounded-full","src","https://toppng.com/uploads/preview/cool-avatar-transparent-image-cool-boy-avatar-11562893383qsirclznyw.png","alt","",4,"ngIf"],[1,"ml-3"],[1,"text-base","leading-6","font-medium","text-blue-950",3,"click"],[1,"text-sm","leading-5","font-medium","text-gray-400","group-hover:text-gray-300","transition","ease-in-out","duration-150"],[1,"m-2","flex","flex-row","justify-between","content-center","block","rounded-lg","bg-white","shadow-[0_2px_15px_-3px_rgba(0,0,0,0.09),0_10px_20px_-2px_rgba(0,0,0,0.04)]"],["data-te-ripple-init","","data-te-ripple-color","light",1,"overflow-hidden","bg-cover","bg-no-repeat","w-40","h-40","text-center"],["alt","",1,"rounded-t-lg","mt-2",3,"src"],[1,"p-6"],[1,"mb-2","leading-tight","text-neutral-800"],[1,"m-2","flex","flex-col"],["type","submit",1,"bg-blue-600","hover:bg-gray-700","mt-5","rounded-3xl","pl-3","pr-3","pt-2","pb-2","text-white",3,"click"],[1,"border-gray-800"],["alt","",1,"inline-block","h-10","w-10","rounded-full",3,"src"],["src","https://toppng.com/uploads/preview/cool-avatar-transparent-image-cool-boy-avatar-11562893383qsirclznyw.png","alt","",1,"inline-block","h-10","w-10","rounded-full"],[1,"mt-4"],["class","flex",4,"ngFor","ngForOf"],[1,"flex"],["href","#",1,"mx-1","flex","h-9","w-9","items-center","justify-center","rounded-full","bg-gradient-to-tr","from-pink-600","to-pink-400","p-0","text-sm","text-white","shadow-md","shadow-pink-500/20","transition","duration-150","ease-in-out"],[1,"p-4","pb-0"]],template:function(r,n){1&r&&(e.TgZ(0,"div",0)(1,"div",1)(2,"form",2),e.NdJ("submit",function(){return n.search()}),e.TgZ(3,"div",3)(4,"input",4),e.NdJ("ngModelChange",function(a){return n.fromValue.address=a}),e.qZA()(),e.TgZ(5,"div",3)(6,"input",5),e.NdJ("ngModelChange",function(a){return n.toValue.address=a}),e.qZA()(),e.TgZ(7,"div",3)(8,"input",6),e.NdJ("ngModelChange",function(a){return n.date=a}),e.qZA()(),e.TgZ(9,"div",3)(10,"button",7),e._uU(11," Search ride "),e.qZA()()()()(),e.YNc(12,S,3,2,"div",8),e.YNc(13,q,6,0,"div",8)),2&r&&(e.xp6(4),e.Q6J("ngModel",n.fromValue.address)("placeholder",n.origin),e.xp6(2),e.Q6J("ngModel",n.toValue.address)("placeholder",n.destination),e.xp6(2),e.Q6J("ngModel",n.date),e.xp6(4),e.Q6J("ngIf",n.searchData),e.xp6(1),e.Q6J("ngIf",n.searchData.length<=0))},dependencies:[d.sg,d.O5,c._Y,c.Fj,c.JJ,c.JL,c.Q7,c.On,c.F,d.gd],styles:[".input-area[_ngcontent-%COMP%]{display:flex;gap:16px;align-items:center}.display-area[_ngcontent-%COMP%]{display:flex;gap:16px;align-items:flex-start;height:calc(100vh - 180px)}.display-area[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{width:30%;overflow:auto;padding:8px;height:inherit}.display-area[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin-bottom:16px}.display-area[_ngcontent-%COMP%] > app-map-display[_ngcontent-%COMP%]{width:70%;height:inherit}.display-area[hidden][_ngcontent-%COMP%]{display:none}.container[_ngcontent-%COMP%]{padding:24px}app-auto-complete[_ngcontent-%COMP%]{width:300px}"]})}return i})();var p=l(7573),A=l(8068);let U=(()=>{class i{constructor(t,r){this._http=t,this.platformId=r,this.baseUrl=u.N.baseUrl}payFare(t,r){return console.log("in amount",t),this._http.post(`${this.baseUrl}/ride/createOrder`,{amount:t,rideID:r})}savePayment(t,r,n){return this._http.patch(`${this.baseUrl}/ride/savePayment`,{data:t,ride:r,amount:n})}get nativeWindow(){if((0,d.NF)(this.platformId))return this._window()}_window(){return window}static#e=this.\u0275fac=function(r){return new(r||i)(e.LFG(g.eN),e.LFG(e.Lbi))};static#t=this.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();function k(i,o){1&i&&(e.TgZ(0,"span",7),e._uU(1,"*Enter amount"),e.qZA())}let J=(()=>{class i{constructor(t,r,n,s,a,h){this.data=t,this._dialog=r,this._razorpayService=n,this._matDialog=s,this._router=a,this.dialogRef=h,this.error=!1,this.paymentError=!1,console.log(t)}ngOnInit(){console.log("data",this.data)}createOrderAndProcessPayment(){this.amount?this._razorpayService.payFare(this.amount,this.data.rideID).subscribe(t=>{if(console.log(t),"Success"===t.status){console.log("result");const r={key:u.N.razorpayKey,amount:100*this.amount,currency:"INR",name:"TRIP SYNC",description:"",image:"../../../../../assets/TripSync.png",order_id:t.data,modal:{escape:!1},notes:{},theme:{color:"#67E8F9"}};r.handler=(s,a)=>{r.response=s,a?(console.log("err"),this._matDialog.open(A.y,{width:"450px"})):(console.log("ok",s),this._razorpayService.savePayment(s,this.data,this.amount).subscribe(h=>{"Success"===h.status&&(this.dialogRef.close(),this._router.navigate(["/user/search/success"],{queryParams:{id:this.data.rideID}}))}))},r.modal.ondismiss=()=>{console.log("ondismiss")},new this._razorpayService.nativeWindow.Razorpay(r).open()}}):this.error=!0}static#e=this.\u0275fac=function(r){return new(r||i)(e.Y36(p.WI),e.Y36(p.uw),e.Y36(U),e.Y36(p.uw),e.Y36(_.F0),e.Y36(p.so))};static#t=this.\u0275cmp=e.Xpm({type:i,selectors:[["app-payment-modal"]],decls:12,vars:2,consts:[["mat-dialog-title","",1,"text-center"],[1,"mat-typography"],["type","number","required","","placeholder","Enter amount",1,"shadow","appearance-none","border","rounded","w-full","py-2","px-3","text-gray-700","mt-1","leading-tight","focus:outline-none","focus:shadow-outline",3,"ngModel","ngModelChange"],["class","m-1 p-1 text-red-500",4,"ngIf"],["mat-raised-button","",1,"bg-blue-500","rounded","shadow-lg","p-2","ps-2","pe-2","m-1","text-white",3,"click"],["align","center"],["mat-button","","mat-dialog-close",""],[1,"m-1","p-1","text-red-500"]],template:function(r,n){1&r&&(e.TgZ(0,"h2",0),e._uU(1,"PAY NOW!"),e.qZA(),e.TgZ(2,"mat-dialog-content",1)(3,"div")(4,"input",2),e.NdJ("ngModelChange",function(a){return n.amount=a}),e.qZA()(),e.YNc(5,k,2,0,"span",3),e.TgZ(6,"div")(7,"button",4),e.NdJ("click",function(){return n.createOrderAndProcessPayment()}),e._uU(8,"Pay now"),e.qZA()()(),e.TgZ(9,"mat-dialog-actions",5)(10,"button",6),e._uU(11,"Close"),e.qZA()()),2&r&&(e.xp6(4),e.Q6J("ngModel",n.amount),e.xp6(1),e.Q6J("ngIf",n.error))},dependencies:[d.O5,c.Fj,c.wV,c.JJ,c.Q7,c.On,p.ZT,p.uh,p.xY,p.H8]})}return i})();var M=l(8486);function D(i,o){if(1&i&&e._UZ(0,"img",41),2&i){const t=e.oxw().$implicit,r=e.oxw(2);e.Q6J("src",r.picUrl+t.vehicleDetails.userDetails.profileImage[t.vehicleDetails.userDetails.profileImage.length-1],e.LSH)}}function N(i,o){1&i&&e._UZ(0,"img",42)}function V(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div")(1,"div",46)(2,"button",47),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(2).$implicit,s=e.oxw(2);return e.KtG(s.requestRide(n._id,n.user_id))}),e._uU(3," Request "),e.qZA()()()}}function O(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",46)(1,"button",47),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(2).$implicit,s=e.oxw(2);return e.KtG(s.requestRide(n._id,n.user_id))}),e._uU(2," Request "),e.qZA()()}}function Y(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",46)(1,"button",47),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(2).$implicit,s=e.oxw(2);return e.KtG(s.payNow(n._id,n.user_id,s.requestId))}),e._uU(2," PAY NOW "),e.qZA()()}}function R(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",46)(1,"button",48),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(2).$implicit,s=e.oxw(2);return e.KtG(s.requestRide(n._id,n.user_id))}),e._uU(2," REJECTED "),e.qZA()()}}function F(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",49)(1,"div",50)(2,"p"),e._uU(3),e.ALo(4,"uppercase"),e.qZA()(),e.TgZ(5,"button",47),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(2).$implicit,s=e.oxw(2);return e.KtG(s.requestRide(n._id,n.user_id))}),e._uU(6," Request "),e.qZA()()}if(2&i){const t=e.oxw(4);e.xp6(3),e.hij("Status : ",e.lcZ(4,1,t.requestStatus),"")}}function Q(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",49)(1,"button",51),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(2).$implicit,s=e.oxw(2);return e.KtG(s.cancelRequest(n._id,n.user_id,"cancel"))}),e._uU(2," Cancel "),e.qZA()()}}function $(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",49)(1,"button",51),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(2).$implicit,s=e.oxw(2);return e.KtG(s.cancelRequest(n._id,n.user_id,"paid"))}),e._uU(2," Cancel "),e.qZA()()}}function L(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",49)(1,"div",50)(2,"p"),e._uU(3),e.ALo(4,"uppercase"),e.qZA()(),e.TgZ(5,"button",47),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(2).$implicit,s=e.oxw(2);return e.KtG(s.requestRide(n._id,n.user_id))}),e._uU(6," Request "),e.qZA()()}if(2&i){const t=e.oxw(4);e.xp6(3),e.hij("Status : ",e.lcZ(4,1,t.requestStatus),"")}}function H(i,o){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,V,4,0,"div",0),e.TgZ(2,"div",43),e.YNc(3,O,3,0,"div",44),e.YNc(4,Y,3,0,"div",44),e.YNc(5,R,3,0,"div",44),e.YNc(6,F,7,3,"div",45),e.YNc(7,Q,3,0,"div",45),e.YNc(8,$,3,0,"div",45),e.YNc(9,L,7,3,"div",45),e.qZA()()),2&i){const t=e.oxw(3);e.xp6(1),e.Q6J("ngIf",!t.requested),e.xp6(1),e.Q6J("ngSwitch",t.requestStatus),e.xp6(1),e.Q6J("ngSwitchCase","pending"),e.xp6(1),e.Q6J("ngSwitchCase","accepted"),e.xp6(1),e.Q6J("ngSwitchCase","rejected"),e.xp6(1),e.Q6J("ngSwitchCase","cancelled"),e.xp6(1),e.Q6J("ngSwitchCase","requested"),e.xp6(1),e.Q6J("ngSwitchCase","paid"),e.xp6(1),e.Q6J("ngSwitchCase","payment returned")}}function P(i,o){if(1&i&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.likes)}}function j(i,o){1&i&&(e.O4$(),e.TgZ(0,"svg",52)(1,"g"),e._UZ(2,"path",53),e.qZA()())}function z(i,o){1&i&&(e.O4$(),e.TgZ(0,"svg",54)(1,"g"),e._UZ(2,"path",53),e.qZA()())}function E(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",37),e.NdJ("click",function(){e.CHM(t);const n=e.oxw().$implicit,s=e.oxw(2);return e.KtG(s.chat(n.vehicleDetails.userDetails.name,n.vehicleDetails.userDetails.email,n.vehicleDetails.userDetails._id,n.vehicleDetails.userDetails.profileImage[n.vehicleDetails.userDetails.profileImage.length-1]))}),e.O4$(),e.TgZ(1,"svg",55),e._UZ(2,"path",56)(3,"path",57),e.qZA()()}}function G(i,o){if(1&i&&e._UZ(0,"img",67),2&i){const t=e.oxw(4);e.Q6J("src",t.picUrl+t.userdata.profileImage[t.userdata.profileImage.length-1],e.LSH)}}function K(i,o){1&i&&e._UZ(0,"img",68)}function B(i,o){if(1&i&&e._UZ(0,"img",67),2&i){const t=e.oxw().$implicit,r=e.oxw(5);e.Q6J("src",r.picUrl+t.profileImage,e.LSH)}}function W(i,o){1&i&&e._UZ(0,"img",68)}function X(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",74),e.NdJ("click",function(){e.CHM(t);const n=e.oxw().$implicit,s=e.oxw(5);return e.KtG(s.deleteReview(n._id))}),e._UZ(1,"i",82),e.qZA()}}function ee(i,o){if(1&i&&(e.TgZ(0,"div",83)(1,"span",84),e._uU(2),e.qZA(),e._UZ(3,"i",85),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(2),e.hij(" ",t.likes," ")}}function te(i,o){if(1&i&&e._UZ(0,"img",67),2&i){const t=e.oxw(7);e.Q6J("src",t.picUrl+t.userdata.profileImage[t.userdata.profileImage.length-1],e.LSH)}}function ie(i,o){1&i&&e._UZ(0,"img",68)}function re(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div")(1,"div",86)(2,"div",59)(3,"div",60)(4,"div"),e.YNc(5,te,1,1,"img",61),e.YNc(6,ie,1,0,"img",62),e.qZA()()(),e.TgZ(7,"div",63)(8,"div",64)(9,"input",65),e.NdJ("ngModelChange",function(n){e.CHM(t);const s=e.oxw(6);return e.KtG(s.reply=n)}),e.qZA()()(),e.TgZ(10,"button",66),e.NdJ("click",function(){e.CHM(t);const n=e.oxw().$implicit,s=e.oxw(5);return e.KtG(s.saveReply(n._id,s.userId))}),e._uU(11," Post "),e.qZA()()()}if(2&i){const t=e.oxw(4).$implicit,r=e.oxw(2);e.xp6(5),e.Q6J("ngIf",t.vehicleDetails.userDetails.profileImage),e.xp6(1),e.Q6J("ngIf",!t.vehicleDetails.userDetails.profileImage),e.xp6(3),e.Q6J("ngModel",r.reply)}}function ne(i,o){if(1&i&&e._UZ(0,"img",67),2&i){const t=e.oxw().$implicit,r=e.oxw(7);e.Q6J("src",r.picUrl+t.replyProfileImage,e.LSH)}}function se(i,o){1&i&&e._UZ(0,"img",68)}function oe(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",74),e.NdJ("click",function(){e.CHM(t);const n=e.oxw().$implicit,s=e.oxw(7);return e.KtG(s.deleteReply(n.replyId))}),e._UZ(1,"i",82),e.qZA()}}function ae(i,o){if(1&i&&(e.TgZ(0,"div",83),e._uU(1),e._UZ(2,"i",93),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",t.replyLikes,"")}}const x=function(i){return{"text-blue-500":i}};function ce(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",88)(1,"div",71)(2,"div")(3,"div"),e.YNc(4,ne,1,1,"img",61),e.YNc(5,se,1,0,"img",62),e.qZA()()(),e.TgZ(6,"div",89)(7,"div")(8,"div",90)(9,"button",74),e.NdJ("click",function(){const s=e.CHM(t).$implicit,a=e.oxw(7);return e.KtG(a.navigator(s.replyUserId))}),e._uU(10),e.ALo(11,"uppercase"),e.qZA(),e.YNc(12,oe,2,0,"button",75),e.qZA(),e.TgZ(13,"div",91),e._uU(14),e.qZA(),e.TgZ(15,"div",92)(16,"button",78),e.NdJ("click",function(){const s=e.CHM(t).$implicit,a=e.oxw(7);return e.KtG(a.replyLike(a.userId,s.replyId))}),e._uU(17,"Like"),e.qZA(),e.YNc(18,ae,3,1,"div",79),e.qZA()()()()}if(2&i){const t=o.$implicit,r=e.oxw(5).$implicit,n=e.oxw(2);e.xp6(4),e.Q6J("ngIf",r.vehicleDetails.userDetails.profileImage),e.xp6(1),e.Q6J("ngIf",!r.vehicleDetails.userDetails.profileImage),e.xp6(5),e.Oqu(e.lcZ(11,7,t.replyUserName)),e.xp6(2),e.Q6J("ngIf",t.replyUserId===n.userId),e.xp6(2),e.hij(" ",t.replyComment," "),e.xp6(2),e.Q6J("ngClass",e.VKq(9,x,t.likedUsers.includes(n.userId))),e.xp6(2),e.Q6J("ngIf",t.likedUsers.length>0)}}function le(i,o){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,ce,19,11,"div",87),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("ngForOf",t.reply)}}function de(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",70)(1,"div",71)(2,"div")(3,"div"),e.YNc(4,B,1,1,"img",61),e.YNc(5,W,1,0,"img",62),e.qZA()()(),e.TgZ(6,"div",72)(7,"div")(8,"div",73)(9,"button",74),e.NdJ("click",function(){const s=e.CHM(t).$implicit,a=e.oxw(5);return e.KtG(a.navigator(s.userId))}),e._uU(10),e.ALo(11,"uppercase"),e.qZA(),e.YNc(12,X,2,0,"button",75),e.qZA(),e.TgZ(13,"div",76),e._uU(14),e.qZA(),e.TgZ(15,"div",77)(16,"button",78),e.NdJ("click",function(){const s=e.CHM(t).$implicit,a=e.oxw(5);return e.KtG(a.reviewLike(a.userId,s._id))}),e._uU(17,"Like"),e.qZA(),e.YNc(18,ee,4,1,"div",79),e.TgZ(19,"span",80),e._uU(20," | "),e.qZA(),e.TgZ(21,"button",81),e.NdJ("click",function(){const s=e.CHM(t).$implicit,a=e.oxw(5);return e.KtG(a.replyView(s._id))}),e._uU(22,"reply"),e.qZA()()(),e.TgZ(23,"div"),e.YNc(24,re,12,3,"div",0),e.YNc(25,le,2,1,"div",0),e.qZA()()()}if(2&i){const t=o.$implicit,r=e.oxw(3).$implicit,n=e.oxw(2);e.xp6(4),e.Q6J("ngIf",r.vehicleDetails.userDetails.profileImage),e.xp6(1),e.Q6J("ngIf",!r.vehicleDetails.userDetails.profileImage),e.xp6(5),e.Oqu(e.lcZ(11,9,t.username)),e.xp6(2),e.Q6J("ngIf",t.userId===n.userId),e.xp6(2),e.hij(" ",t.message," "),e.xp6(2),e.Q6J("ngClass",e.VKq(11,x,t.likedUsers.includes(n.userId))),e.xp6(2),e.Q6J("ngIf",t.likedUsers.length>0),e.xp6(6),e.Q6J("ngIf",n.replySection===t._id),e.xp6(1),e.Q6J("ngIf",t.reply.length>0)}}function _e(i,o){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,de,26,13,"div",69),e.qZA()),2&i){const t=e.oxw(4);e.xp6(1),e.Q6J("ngForOf",t.reviewData)}}function pe(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div")(1,"div",58)(2,"div",59)(3,"div",60)(4,"div"),e.YNc(5,G,1,1,"img",61),e.YNc(6,K,1,0,"img",62),e.qZA()()(),e.TgZ(7,"div",63)(8,"div",64)(9,"input",65),e.NdJ("ngModelChange",function(n){e.CHM(t);const s=e.oxw(3);return e.KtG(s.review=n)}),e.qZA()()(),e.TgZ(10,"button",66),e.NdJ("click",function(){e.CHM(t);const n=e.oxw().$implicit,s=e.oxw(2);return e.KtG(s.saveReview(n._id,s.userId))}),e._uU(11," Post "),e.qZA()(),e.YNc(12,_e,2,1,"div",0),e.qZA()}if(2&i){const t=e.oxw().$implicit,r=e.oxw(2);e.xp6(5),e.Q6J("ngIf",t.vehicleDetails.userDetails.profileImage),e.xp6(1),e.Q6J("ngIf",!t.vehicleDetails.userDetails.profileImage),e.xp6(3),e.Q6J("ngModel",r.review),e.xp6(3),e.Q6J("ngIf",r.reviewData.length>0)}}function ue(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"article",2)(1,"div",3)(2,"div",4)(3,"div"),e.YNc(4,D,1,1,"img",5),e.YNc(5,N,1,0,"img",6),e.qZA(),e.TgZ(6,"div",7)(7,"p",8),e.NdJ("click",function(){const s=e.CHM(t).$implicit,a=e.oxw(2);return e.KtG(a.navigator(s.vehicleDetails.userDetails._id))}),e._uU(8),e.TgZ(9,"span",9),e._uU(10),e.qZA()()()()(),e.TgZ(11,"div",10)(12,"div",11),e._UZ(13,"img",12),e.qZA(),e.TgZ(14,"div",13)(15,"span",14),e._uU(16," VEHICLE DETAILS "),e.qZA(),e.TgZ(17,"div",15),e.O4$(),e.TgZ(18,"svg",16),e._UZ(19,"path",17),e.qZA(),e.kcU(),e.TgZ(20,"span",18),e._uU(21),e.qZA()(),e.TgZ(22,"div",15),e.O4$(),e.TgZ(23,"svg",19),e._UZ(24,"path",20),e.qZA(),e.kcU(),e.TgZ(25,"span",18),e._uU(26),e.qZA()(),e.TgZ(27,"div",15),e.O4$(),e.TgZ(28,"svg",21),e._UZ(29,"path",22)(30,"path",23),e.qZA(),e.kcU(),e.TgZ(31,"span",18),e._uU(32),e.qZA()()(),e.TgZ(33,"div",13)(34,"span",24),e._uU(35," RIDE DETAILS "),e.qZA(),e.TgZ(36,"div",15),e.O4$(),e.TgZ(37,"svg",25),e._UZ(38,"path",26),e.qZA(),e.kcU(),e.TgZ(39,"span",18),e._uU(40),e.ALo(41,"uppercase"),e.qZA()(),e.TgZ(42,"div",15),e.O4$(),e.TgZ(43,"svg",27),e._UZ(44,"path",28),e.qZA(),e.kcU(),e.TgZ(45,"span",18),e._uU(46),e.ALo(47,"uppercase"),e.qZA()(),e.TgZ(48,"div",29),e.O4$(),e.TgZ(49,"svg",30),e._UZ(50,"path",31),e.qZA(),e.kcU(),e.TgZ(51,"span",18),e._uU(52),e.qZA()()()(),e.YNc(53,H,10,9,"div",0),e.TgZ(54,"div",32)(55,"div",33),e.NdJ("click",function(){const s=e.CHM(t).$implicit,a=e.oxw(2);return e.KtG(a.likeRide(s._id,a.userId))}),e.YNc(56,P,2,1,"span",0),e.YNc(57,j,3,0,"svg",34),e.YNc(58,z,3,0,"svg",35),e.qZA(),e.YNc(59,E,4,0,"div",36),e.TgZ(60,"div",37),e.NdJ("click",function(){const s=e.CHM(t).$implicit,a=e.oxw(2);return e.KtG(a.loadReview(s._id))}),e.O4$(),e.TgZ(61,"svg",38),e._UZ(62,"path",39),e.qZA()()(),e.kcU(),e._UZ(63,"hr",40),e.YNc(64,pe,13,4,"div",0),e.qZA()}if(2&i){const t=o.$implicit,r=e.oxw(2);e.xp6(4),e.Q6J("ngIf",t.vehicleDetails.userDetails.profileImage),e.xp6(1),e.Q6J("ngIf",!t.vehicleDetails.userDetails.profileImage),e.xp6(3),e.hij(" ",t.vehicleDetails.userDetails.name," "),e.xp6(2),e.hij(" ",t.vehicleDetails.userDetails.email," "),e.xp6(3),e.Q6J("src",r.picUrl+t.vehicleDetails.VehiclePhotos[t.vehicleDetails.VehiclePhotos.length-1],e.LSH),e.xp6(8),e.hij("BRAND : ",t.vehicleDetails.brand,""),e.xp6(5),e.Oqu(t.vehicleDetails.model),e.xp6(6),e.hij("REG_NO : ",t.vehicleDetails.registration.registrationNumber,""),e.xp6(8),e.Oqu(e.lcZ(41,17,t.origin)),e.xp6(6),e.Oqu(e.lcZ(47,19,t.destination)),e.xp6(6),e.Oqu(t.departure_date.split("T")[0]),e.xp6(1),e.Q6J("ngIf",t.user_id!==r.userId),e.xp6(3),e.Q6J("ngIf",t.likedUsers.length>0),e.xp6(1),e.Q6J("ngIf",t.likedUsers.includes(r.userId)),e.xp6(1),e.Q6J("ngIf",!t.likedUsers.includes(r.userId)),e.xp6(1),e.Q6J("ngIf",t.user_id!==r.userId),e.xp6(5),e.Q6J("ngIf",r.reviewSection)}}function he(i,o){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,ue,65,21,"article",1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.searchData)}}let ge=(()=>{class i{constructor(t,r,n,s,a,h){this._route=t,this._rideService=r,this._searchService=n,this._router=s,this._matDialog=a,this._jwt=h,this.picUrl=u.N.picUrl,this.id="",this.err="",this.requestStatus="",this.requested=!1,this.requestId="",this.userId="",this.review="",this.reply="",this.reviewSection=!1,this.reviewData=[],this.replySection=""}ngOnInit(){this._route.queryParamMap.subscribe(r=>{this.id=r.get("id"),console.log(this.id)}),this.getData(this.id);const t=localStorage.getItem("state");this.userId=JSON.parse(t)._id,this.userdata=JSON.parse(t)}getData(t){this._rideSubscription=this._rideService.getSearchData(t).subscribe(r=>{if(console.log(r),"Success"===r.status){console.log("cancel"),this.searchData=r.data,console.log("this.searchData>>",this.searchData),this.reviewData=r.review;const n=this.searchData[0].rideRequest;console.log("ridereqarray",n),n?.find(s=>{s.userId===this.userId&&(this.requested=!0,this.requestStatus=s.status,this.requestId=s._id)})}else this.err=r.message,this.searchData=[]})}chat(t,r,n,s){console.log(t,r),this._router.navigate(["/user/search/chat"],{queryParams:{name:t,email:r,userId:n,image:s}})}navigator(t){console.log(t),this._router.navigate(["/user/profile"],{queryParams:{id:t}})}cancelRequest(t,r,n){console.log("id"),this._requestSubscription=this._searchService.cancelRideRequest(t,r,this.requestId,n).subscribe(s=>{"Success"===s.status&&(console.log("in success"),this.requested=!1,this.requestStatus="",this.requestId="",this.getData(this.id))})}requestRide(t,r){console.log(t,">>",r),this._requestSubscription=this._searchService.request(t,r,this.requestId).subscribe(n=>{"Success"===n.status&&this.getData(this.id)})}saveReview(t,r){console.log("comment",this.review),this._searchService.saveReview(t,r,this.review).subscribe(n=>{console.log(n),this.review="",this.getData(this.id)})}saveReply(t,r){console.log("comment",this.review),this._searchService.saveReply(t,r,this.reply).subscribe(n=>{console.log(n),this.reply="",this.getData(this.id)})}payNow(t,r,n){this._matDialog.open(J,{width:"450px",data:{rideID:n,userId:r}})}loadReview(t){this.reviewSection=!0}reviewLike(t,r){this._searchService.saveReviewLike(t,r).subscribe(n=>{"Success"===n.status&&this.getData(this.id)})}replyLike(t,r){this._searchService.saveReplyLike(t,r).subscribe(n=>{"Success"===n.status&&this.getData(this.id)})}replyView(t){this.replySection=t}deleteReply(t){this._searchService.deleteReply(t).subscribe(r=>{"Success"===r.status&&this.getData(this.id)})}deleteReview(t){this._searchService.deleteReview(t).subscribe(r=>{"Success"===r.status&&(console.log("in delete review",r),this.getData(this.id))})}likeRide(t,r){this._searchService.rideLikes(t,r).subscribe(n=>{"Success"===n.status&&this.getData(this.id)})}static#e=this.\u0275fac=function(r){return new(r||i)(e.Y36(_.gz),e.Y36(M.v),e.Y36(v),e.Y36(_.F0),e.Y36(p.uw),e.Y36(f.T))};static#t=this.\u0275cmp=e.Xpm({type:i,selectors:[["app-view-search"]],decls:1,vars:1,consts:[[4,"ngIf"],["class","bg-white hover:bg-gray-100 mt-3 transition duration-350 ease-in-out",4,"ngFor","ngForOf"],[1,"bg-white","hover:bg-gray-100","mt-3","transition","duration-350","ease-in-out"],[1,"flex","flex-shrink-0","p-4","pb-0"],[1,"flex","items-center"],["class","inline-block h-10 w-10 rounded-full","alt","",3,"src",4,"ngIf"],["class","inline-block h-10 w-10 rounded-full","src","https://toppng.com/uploads/preview/cool-avatar-transparent-image-cool-boy-avatar-11562893383qsirclznyw.png","alt","",4,"ngIf"],[1,"ml-3"],[1,"text-base","leading-6","font-medium","text-blue-950",3,"click"],[1,"text-sm","leading-5","font-medium","text-gray-400","group-hover:text-gray-300","transition","ease-in-out","duration-150"],[1,"m-0","md:m-2","flex","flex-row","justify-center","rounded-lg","bg-white","shadow-[0_2px_15px_-3px_rgba(0,0,0,0.09),0_10px_20px_-2px_rgba(0,0,0,0.04)]"],["data-te-ripple-init","","data-te-ripple-color","light",1,"overflow-hidden","bg-cover","bg-no-repeat","w-40","h-40","text-center"],["alt","",1,"rounded-t-lg","mt-2",3,"src"],[1,"p-6","flex","flex-col"],[1,"mb-2","leading-tight","text-center","text-neutral-800"],[1,"bg-gray-200","w-80","p-3","m-1","rounded-xl","flex","flex-row"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-car-front-fill","m-1","text-blue-600"],["d","M2.52 3.515A2.5 2.5 0 0 1 4.82 2h6.362c1 0 1.904.596 2.298 1.515l.792 1.848c.075.175.21.319.38.404.5.25.855.715.965 1.262l.335 1.679c.033.161.049.325.049.49v.413c0 .814-.39 1.543-1 1.997V13.5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1-.5-.5v-1.338c-1.292.048-2.745.088-4 .088s-2.708-.04-4-.088V13.5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1-.5-.5v-1.892c-.61-.454-1-1.183-1-1.997v-.413a2.5 2.5 0 0 1 .049-.49l.335-1.68c.11-.546.465-1.012.964-1.261a.807.807 0 0 0 .381-.404l.792-1.848ZM3 10a1 1 0 1 0 0-2 1 1 0 0 0 0 2m10 0a1 1 0 1 0 0-2 1 1 0 0 0 0 2M6 8a1 1 0 0 0 0 2h4a1 1 0 1 0 0-2zM2.906 5.189a.51.51 0 0 0 .497.731c.91-.073 3.35-.17 4.597-.17 1.247 0 3.688.097 4.597.17a.51.51 0 0 0 .497-.731l-.956-1.913A.5.5 0 0 0 11.691 3H4.309a.5.5 0 0 0-.447.276L2.906 5.19Z"],[1,"m-1","text-gray-900"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-sliders","m-1","text-blue-600"],["fill-rule","evenodd","d","M11.5 2a1.5 1.5 0 1 0 0 3 1.5 1.5 0 0 0 0-3M9.05 3a2.5 2.5 0 0 1 4.9 0H16v1h-2.05a2.5 2.5 0 0 1-4.9 0H0V3zM4.5 7a1.5 1.5 0 1 0 0 3 1.5 1.5 0 0 0 0-3M2.05 8a2.5 2.5 0 0 1 4.9 0H16v1H6.95a2.5 2.5 0 0 1-4.9 0H0V8zm9.45 4a1.5 1.5 0 1 0 0 3 1.5 1.5 0 0 0 0-3m-2.45 1a2.5 2.5 0 0 1 4.9 0H16v1h-2.05a2.5 2.5 0 0 1-4.9 0H0v-1z"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-r-square-fill","m-1","text-blue-600"],["d","M6.835 5.092v2.777h1.549c.995 0 1.573-.463 1.573-1.36 0-.913-.596-1.417-1.537-1.417z"],["d","M2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2zm3.5 4.002h3.11c1.71 0 2.741.973 2.741 2.46 0 1.138-.667 1.94-1.495 2.24L11.5 12H9.98L8.52 8.924H6.836V12H5.5z"],[1,"mb-2","leading-tight","text-neutral-800","text-center"],["xmlns","http://www.w3.org/2000/svg","width","18","height","18","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-geo-alt-fill","m-1","text-blue-600"],["d","M8 16s6-5.686 6-10A6 6 0 0 0 2 6c0 4.314 6 10 6 10m0-7a3 3 0 1 1 0-6 3 3 0 0 1 0 6"],["xmlns","http://www.w3.org/2000/svg","width","18","height","18","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-geo-fill","m-1","text-blue-600"],["fill-rule","evenodd","d","M4 4a4 4 0 1 1 4.5 3.969V13.5a.5.5 0 0 1-1 0V7.97A4 4 0 0 1 4 3.999zm2.493 8.574a.5.5 0 0 1-.411.575c-.712.118-1.28.295-1.655.493a1.319 1.319 0 0 0-.37.265.301.301 0 0 0-.057.09V14l.002.008a.147.147 0 0 0 .016.033.617.617 0 0 0 .145.15c.165.13.435.27.813.395.751.25 1.82.414 3.024.414s2.273-.163 3.024-.414c.378-.126.648-.265.813-.395a.619.619 0 0 0 .146-.15.148.148 0 0 0 .015-.033L12 14v-.004a.301.301 0 0 0-.057-.09 1.318 1.318 0 0 0-.37-.264c-.376-.198-.943-.375-1.655-.493a.5.5 0 1 1 .164-.986c.77.127 1.452.328 1.957.594C12.5 13 13 13.4 13 14c0 .426-.26.752-.544.977-.29.228-.68.413-1.116.558-.878.293-2.059.465-3.34.465-1.281 0-2.462-.172-3.34-.465-.436-.145-.826-.33-1.116-.558C3.26 14.752 3 14.426 3 14c0-.599.5-1 .961-1.243.505-.266 1.187-.467 1.957-.594a.5.5 0 0 1 .575.411"],[1,"bg-gray-200","w-80","p-3","m-1","rounded-xl","flex","flex-row","justify-center"],["xmlns","http://www.w3.org/2000/svg","width","18","height","18","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-calendar-check-fill","m-1","text-blue-600"],["d","M4 .5a.5.5 0 0 0-1 0V1H2a2 2 0 0 0-2 2v1h16V3a2 2 0 0 0-2-2h-1V.5a.5.5 0 0 0-1 0V1H4zM16 14V5H0v9a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2m-5.146-5.146-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 0 1 .708-.708L7.5 10.793l2.646-2.647a.5.5 0 0 1 .708.708z"],[1,"flex","items-center","py-4","ml-10"],[1,"flex-1","flex","items-center","text-blue-600","text-xs","hover:text-red-600","transition","duration-350","ease-in-out",3,"click"],["viewBox","0 0 24 24","fill","red","class","w-5 h-5 mr-2",4,"ngIf"],["viewBox","0 0 24 24","fill","currentColor","class","w-5 h-5 mr-2",4,"ngIf"],["class","flex-1 flex items-center text-blue-600 text-xs  hover:text-blue-400 transition duration-350 ease-in-out",3,"click",4,"ngIf"],[1,"flex-1","flex","items-center","text-blue-600","text-xs","hover:text-blue-400","transition","duration-350","ease-in-out",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","20","height","20","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-chat-left-text-fill"],["d","M0 2a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H4.414a1 1 0 0 0-.707.293L.854 15.146A.5.5 0 0 1 0 14.793zm3.5 1a.5.5 0 0 0 0 1h9a.5.5 0 0 0 0-1zm0 2.5a.5.5 0 0 0 0 1h9a.5.5 0 0 0 0-1zm0 2.5a.5.5 0 0 0 0 1h5a.5.5 0 0 0 0-1z"],[1,"border-cyan-800"],["alt","",1,"inline-block","h-10","w-10","rounded-full",3,"src"],["src","https://toppng.com/uploads/preview/cool-avatar-transparent-image-cool-boy-avatar-11562893383qsirclznyw.png","alt","",1,"inline-block","h-10","w-10","rounded-full"],[3,"ngSwitch"],["class","m-2 flex flex-col text-center ",4,"ngSwitchCase"],["class","m-2 flex ",4,"ngSwitchCase"],[1,"m-2","flex","flex-col","text-center"],["type","submit",1,"bg-blue-600","hover:bg-gray-700","mt-5","w-1/4","rounded-3xl","pl-3","pr-3","pt-2","pb-2","text-white",3,"click"],["type","submit","disabled","",1,"bg-red-600","hover:bg-gray-700","mt-5","w-1/4","rounded-3xl","pl-3","pr-3","pt-2","pb-2","text-white",3,"click"],[1,"m-2","flex"],[1,"pl-3","pr-3","pt-7","pb-2"],["type","button",1,"bg-blue-600","hover:bg-gray-700","mt-5","rounded-3xl","pl-3","pr-3","pt-2","pb-2","text-white",3,"click"],["viewBox","0 0 24 24","fill","red",1,"w-5","h-5","mr-2"],["d","M12 21.638h-.014C9.403 21.59 1.95 14.856 1.95 8.478c0-3.064 2.525-5.754 5.403-5.754 2.29 0 3.83 1.58 4.646 2.73.814-1.148 2.354-2.73 4.645-2.73 2.88 0 5.404 2.69 5.404 5.755 0 6.376-7.454 13.11-10.037 13.157H12zM7.354 4.225c-2.08 0-3.903 1.988-3.903 4.255 0 5.74 7.034 11.596 8.55 11.658 1.518-.062 8.55-5.917 8.55-11.658 0-2.267-1.823-4.255-3.903-4.255-2.528 0-3.94 2.936-3.952 2.965-.23.562-1.156.562-1.387 0-.014-.03-1.425-2.965-3.954-2.965z"],["viewBox","0 0 24 24","fill","currentColor",1,"w-5","h-5","mr-2"],["xmlns","http://www.w3.org/2000/svg","width","20","height","20","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-wechat"],["d","M11.176 14.429c-2.665 0-4.826-1.8-4.826-4.018 0-2.22 2.159-4.02 4.824-4.02S16 8.191 16 10.411c0 1.21-.65 2.301-1.666 3.036a.324.324 0 0 0-.12.366l.218.81a.616.616 0 0 1 .029.117.166.166 0 0 1-.162.162.177.177 0 0 1-.092-.03l-1.057-.61a.519.519 0 0 0-.256-.074.509.509 0 0 0-.142.021 5.668 5.668 0 0 1-1.576.22ZM9.064 9.542a.647.647 0 1 0 .557-1 .645.645 0 0 0-.646.647.615.615 0 0 0 .09.353Zm3.232.001a.646.646 0 1 0 .546-1 .645.645 0 0 0-.644.644.627.627 0 0 0 .098.356Z"],["d","M0 6.826c0 1.455.781 2.765 2.001 3.656a.385.385 0 0 1 .143.439l-.161.6-.1.373a.499.499 0 0 0-.032.14.192.192 0 0 0 .193.193c.039 0 .077-.01.111-.029l1.268-.733a.622.622 0 0 1 .308-.088c.058 0 .116.009.171.025a6.83 6.83 0 0 0 1.625.26 4.45 4.45 0 0 1-.177-1.251c0-2.936 2.785-5.02 5.824-5.02.05 0 .1 0 .15.002C10.587 3.429 8.392 2 5.796 2 2.596 2 0 4.16 0 6.826Zm4.632-1.555a.77.77 0 1 1-1.54 0 .77.77 0 0 1 1.54 0Zm3.875 0a.77.77 0 1 1-1.54 0 .77.77 0 0 1 1.54 0Z"],[1,"flex","flex-row","mx-auto","items-center","justify-center","shadow-lg","px-3","mb-4","w-full","bg-white"],[1,"flex","p-4","pb-0"],[1,"items-center"],["class","inline-block h-8 w-9 rounded-full","alt","",3,"src",4,"ngIf"],["class","inline-block h-8 w-9 rounded-full","src","https://toppng.com/uploads/preview/cool-avatar-transparent-image-cool-boy-avatar-11562893383qsirclznyw.png","alt","",4,"ngIf"],[1,"w-full","bg-white","rounded-lg","px-4","pt-5"],["data-te-input-wrapper-init","",1,"relative","mb-3"],["id","exampleFormControlTextarea1","rows","3","placeholder","Write your review",1,"peer","block","min-h-[auto]","w-full","py-2","rounded-xl","border","border-cyan-500","bg-transparent","px-3","leading-[1.6]","outline-none","transition-all","duration-200","ease-linear","focus:placeholder:opacity-100","data-[te-input-state-active]:placeholder:opacity-100","motion-reduce:transition-none",3,"ngModel","ngModelChange"],["type","submit",1,"bg-blue-600","hover:bg-gray-700","w-auto","rounded","pl-3","pr-3","pt-2","pb-2","text-white",3,"click"],["alt","",1,"inline-block","h-8","w-9","rounded-full",3,"src"],["src","https://toppng.com/uploads/preview/cool-avatar-transparent-image-cool-boy-avatar-11562893383qsirclznyw.png","alt","",1,"inline-block","h-8","w-9","rounded-full"],["class","flex flex-row mx-auto  justify-center  px-3  mb-4 w-full",4,"ngFor","ngForOf"],[1,"flex","flex-row","mx-auto","justify-center","px-3","mb-4","w-full"],[1,"flex","p-1"],[1,"w-full","bg-slate-200","rounded-lg","ml-2","px-4","pt-1","pb-2"],[1,"flex","flex-row","justify-between","hover:text-gray-700","p-3"],["type","button",3,"click"],["type","button",3,"click",4,"ngIf"],[1,"pt-2","pl-3"],[1,"w-full","flex","flex-row","mt-5"],[1,"bg-slate-300","px-1","py-1",3,"ngClass","click"],["class"," p-1 pl-3",4,"ngIf"],[1,"m-1"],[1,"bg-slate-300","px-1","py-1",3,"click"],[1,"fa-solid","fa-trash","text-red-600"],[1,"p-1","pl-3"],[1,"text-green-600"],[1,"fa-regular","fa-thumbs-up"],[1,"flex","flex-row","mx-auto","items-center","justify-center","shadow-lg","rounded-lg","px-3","mb-4","w-full","bg-white"],["class","flex flex-row mx-auto  justify-center mt-2 mb-1 px-3 mb-4 w-full rounded-lg bg-white",4,"ngFor","ngForOf"],[1,"flex","flex-row","mx-auto","justify-center","mt-2","mb-1","px-3","mb-4","w-full","rounded-lg","bg-white"],[1,"w-full","rounded-lg","ml-2","px-4","pt-1","pb-2"],[1,"flex","flex-row","justify-between"],[1,"text-gray-500"],[1,"w-full","flex","flex-row","mt-2"],[1,"fa-regular","fa-thumbs-up","p-1","pl-3","text-blue-700"]],template:function(r,n){1&r&&e.YNc(0,he,2,1,"div",0),2&r&&e.Q6J("ngIf",n.searchData.length>0)},dependencies:[d.mk,d.sg,d.O5,d.RF,d.n9,c.Fj,c.JJ,c.On,d.gd]})}return i})(),me=(()=>{class i{constructor(t,r){this._route=t,this._router=r,this.id="",this._route.queryParamMap.subscribe(n=>{this.id=n.get("id"),console.log(this.id)})}viewRide(){this._router.navigate(["/user/search/view"],{queryParams:{id:this.id}})}home(){this._router.navigate(["/user"])}static#e=this.\u0275fac=function(r){return new(r||i)(e.Y36(_.gz),e.Y36(_.F0))};static#t=this.\u0275cmp=e.Xpm({type:i,selectors:[["app-succes"]],decls:13,vars:0,consts:[[1,"flex","flex-col","justify-center","items-center","h-[100vh]"],[1,"!z-5","relative","flex","flex-col","rounded-[20px]","max-w-[300px]","bg-white","bg-clip-border","shadow-3xl","shadow-shadow-500","flex","flex-col","w-full","!p-4","3xl:p-![18px]","bg-white","undefined"],[1,"h-full","w-full"],[1,"relative","w-full","flex","justify-center"],["src","../../../assets/Animation - 1701681703733.gif","alt",""],[1,"mb-3","flex","items-center","justify-around","px-1","md:items-start"],[1,"flex","flex-row-reverse","md:mt-2","lg:mt-0"],[3,"click"]],template:function(r,n){1&r&&(e.TgZ(0,"body")(1,"div",0)(2,"div",1)(3,"div",2)(4,"div",3),e._UZ(5,"img",4),e.qZA(),e.TgZ(6,"div",5)(7,"div",6)(8,"button",7),e.NdJ("click",function(){return n.viewRide()}),e._uU(9,"VIEW RIDE"),e.qZA()(),e.TgZ(10,"div",6)(11,"button",7),e.NdJ("click",function(){return n.home()}),e._uU(12,"HOME"),e.qZA()()()()()()())}})}return i})();var ve=l(1114);let fe=(()=>{class i{constructor(t){this._http=t,this.baseUrl=u.N.baseUrl}getChatRoomsChat(t){return this._http.get(`${this.baseUrl}/auth/chatroom?room=${t}`)}getLoggedInUser(){let t;const r=localStorage.getItem("state");return t=JSON.parse(r),t}static#e=this.\u0275fac=function(r){return new(r||i)(e.LFG(g.eN))};static#t=this.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();function xe(i,o){if(1&i&&(e.TgZ(0,"div",24)(1,"div",25)(2,"div",26)(3,"div")(4,"span",27),e._uU(5),e.qZA()()(),e._UZ(6,"img",28),e.qZA()()),2&i){const t=e.oxw().$implicit,r=e.oxw(2);e.xp6(5),e.Oqu(t.message),e.xp6(1),e.Q6J("src",r.picUrl+r.image,e.LSH)}}function we(i,o){if(1&i&&(e.TgZ(0,"div",24)(1,"div",29)(2,"div",30)(3,"div")(4,"span",31),e._uU(5),e.qZA()()(),e._UZ(6,"img",32),e.qZA()()),2&i){const t=e.oxw().$implicit,r=e.oxw(2);e.xp6(5),e.Oqu(t.message),e.xp6(1),e.Q6J("src",r.picUrl+r.currentUser.profileImage[r.currentUser.profileImage.length-1],e.LSH)}}function be(i,o){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,xe,7,2,"div",23),e.YNc(2,we,7,2,"div",23),e.qZA()),2&i){const t=o.$implicit,r=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.user!==r.currentUser.name),e.xp6(1),e.Q6J("ngIf",t.user===r.currentUser.name)}}function Ze(i,o){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,be,3,2,"div",22),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.messageArray)}}const ye=[{path:"",component:I},{path:"view",component:ge},{path:"success",component:me},{path:"chat",component:(()=>{class i{constructor(t,r,n,s){this.route=t,this.webSocketService=r,this.userService=n,this.router=s,this.picUrl=u.N.picUrl,this.username="",this.email="",this.message="",this.image="https://www.google.com/url?sa=i&url=https%3A%2F%2Fwww.istockphoto.com%2Fphotos%2Favatar&psig=AOvVaw370XiM5wgGVpNEOZ3nQ3pK&ust=1702965487586000&source=images&cd=vfe&opi=89978449&ved=0CBIQjRxqFwoTCMC2zI2nmIMDFQAAAAAdAAAAABAD",this.userID="",this.messageArray=[],this.isTyping=!1,this.webSocketService.newMessageReceived().subscribe(a=>{this.messageArray.push(a),this.isTyping=!1}),this.webSocketService.receivedTyping().subscribe(a=>{this.isTyping=a.isTyping})}ngOnInit(){this.username=this.route.snapshot.queryParamMap.get("name"),this.email=this.route.snapshot.queryParamMap.get("email"),this.image=this.route.snapshot.queryParamMap.get("image"),this.userID=this.route.snapshot.queryParamMap.get("userId"),this.currentUser=this.userService.getLoggedInUser(),this.currentUser&&this.username&&this.currentUser.name<this.username?this.chatroom=this.currentUser.name.concat(this.username):this.username&&(this.chatroom=this.username.concat(this.currentUser.name)),this.username&&(this.webSocketService.joinRoom({user:this.userService.getLoggedInUser().name,room:this.chatroom}),this.userService.getChatRoomsChat(this.chatroom).subscribe(t=>{console.log("message>>",t),this.messageArray=t}))}sendMessage(){console.log(this.message,this.messageArray),this.webSocketService.sendMessage({room:this.chatroom,user:this.userService.getLoggedInUser().name,message:this.message}),this.message=""}typing(){this.webSocketService.typing({room:this.chatroom,user:this.userService.getLoggedInUser().name})}navigator(t){console.log(t),this.router.navigate(["/user/profile"],{queryParams:{id:t}})}static#e=this.\u0275fac=function(r){return new(r||i)(e.Y36(_.gz),e.Y36(ve.i),e.Y36(fe),e.Y36(_.F0))};static#t=this.\u0275cmp=e.Xpm({type:i,selectors:[["app-chat"]],decls:25,vars:5,consts:[[1,"flex-1","p:2","sm:p-6","justify-between","flex","flex-col","h-screen"],[1,"flex","sm:items-center","justify-between","py-3","border-b-2","border-gray-200"],[1,"relative","flex","items-center","space-x-4"],[1,"relative"],[1,"absolute","text-green-500","right-0","bottom-0"],["width","20","height","20"],["cx","8","cy","8","r","8","fill","currentColor"],["alt","image",1,"w-10","sm:w-16","h-10","sm:h-16","rounded-full",3,"src"],[1,"flex","flex-col","leading-tight",3,"click"],[1,"text-xl","mt-1","flex","items-center"],[1,"text-gray-700","mr-3","text-uppercase"],[1,"text-gray-600"],["id","messages",1,"flex","flex-col","space-y-4","p-3","overflow-y-auto","scrollbar-thumb-blue","scrollbar-thumb-rounded","scrollbar-track-blue-lighter","scrollbar-w-2","scrolling-touch"],[4,"ngIf"],[1,"border-t-2","border-gray-200","px-4","pt-4","mb-2","sm:mb-0"],[1,"relative","flex"],["type","text","name","message","placeholder","Write your message!",1,"w-full","focus:outline-none","focus:placeholder-gray-400","text-gray-600","placeholder-gray-600","pl-12","bg-gray-200","rounded-md","py-3",3,"ngModel","keypress","ngModelChange"],[1,"absolute","right-0","items-center","inset-y-0","hidden","sm:flex"],["type","button","id","send",1,"inline-flex","items-center","justify-center","rounded-lg","px-4","py-3","transition","duration-500","ease-in-out","text-white","bg-blue-500","hover:bg-blue-400","focus:outline-none",3,"click"],[1,"font-bold"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 20 20","fill","currentColor",1,"h-6","w-6","ml-2","transform","rotate-90"],["d","M10.894 2.553a1 1 0 00-1.788 0l-7 14a1 1 0 001.169 1.409l5-1.429A1 1 0 009 15.571V11a1 1 0 112 0v4.571a1 1 0 00.725.962l5 1.428a1 1 0 001.17-1.408l-7-14z"],[4,"ngFor","ngForOf"],["class","chat-message m-1",4,"ngIf"],[1,"chat-message","m-1"],[1,"flex","items-end"],[1,"flex","flex-col","space-y-2","text-xs","max-w-xs","mx-2","order-2","items-start"],[1,"px-4","py-2","rounded-lg","inline-block","rounded-bl-none","bg-gray-300","text-gray-600"],["alt","My profile",1,"w-6","h-6","rounded-full","order-1",3,"src"],[1,"flex","items-end","justify-end"],[1,"flex","flex-col","space-y-2","text-xs","max-w-xs","mx-2","order-1","items-end"],[1,"px-4","py-2","rounded-lg","inline-block","rounded-br-none","bg-blue-600","text-white"],["alt","My profile",1,"w-6","h-6","rounded-full","order-2",3,"src"]],template:function(r,n){1&r&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"span",4),e.O4$(),e.TgZ(5,"svg",5),e._UZ(6,"circle",6),e.qZA()(),e.kcU(),e._UZ(7,"img",7),e.qZA(),e.TgZ(8,"div",8),e.NdJ("click",function(){return n.navigator(n.userID)}),e.TgZ(9,"div",9)(10,"span",10),e._uU(11),e.qZA()(),e.TgZ(12,"span",11),e._uU(13),e.qZA()()()(),e.TgZ(14,"div",12),e.YNc(15,Ze,2,1,"div",13),e.TgZ(16,"div",14)(17,"div",15)(18,"input",16),e.NdJ("keypress",function(){return n.typing()})("ngModelChange",function(a){return n.message=a}),e.qZA(),e.TgZ(19,"div",17)(20,"button",18),e.NdJ("click",function(){return n.sendMessage()}),e.TgZ(21,"span",19),e._uU(22,"Send"),e.qZA(),e.O4$(),e.TgZ(23,"svg",20),e._UZ(24,"path",21),e.qZA()()()()()()()),2&r&&(e.xp6(7),e.Q6J("src",n.picUrl+n.image,e.LSH),e.xp6(4),e.Oqu(n.username),e.xp6(2),e.Oqu(n.email),e.xp6(2),e.Q6J("ngIf",n.messageArray.length>0),e.xp6(3),e.Q6J("ngModel",n.message))},dependencies:[d.sg,d.O5,c.Fj,c.JJ,c.On],styles:[".scrollbar-w-2[_ngcontent-%COMP%]::-webkit-scrollbar{width:.25rem;height:.25rem}.scrollbar-track-blue-lighter[_ngcontent-%COMP%]::-webkit-scrollbar-track{--bg-opacity: 1;background-color:#f7fafc;background-color:rgba(247,250,252,var(--bg-opacity))}.scrollbar-thumb-blue[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{--bg-opacity: 1;background-color:#edf2f7;background-color:rgba(237,242,247,var(--bg-opacity))}.scrollbar-thumb-rounded[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{border-radius:.25rem}"]})}return i})()}];let Ce=(()=>{class i{static#e=this.\u0275fac=function(r){return new(r||i)};static#t=this.\u0275mod=e.oAB({type:i});static#i=this.\u0275inj=e.cJS({imports:[_.Bz.forChild(ye),_.Bz]})}return i})();var Te=l(9025),Se=l(5195);let qe=(()=>{class i{static#e=this.\u0275fac=function(r){return new(r||i)};static#t=this.\u0275mod=e.oAB({type:i});static#i=this.\u0275inj=e.cJS({imports:[d.ez,Ce,c.UX,Te.Y4,c.u5,p.Is,Se.QW]})}return i})()}}]);